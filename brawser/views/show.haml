%div
  %a{href:"/?auto1=true", :class => "btn"} 賢い代指
  %a{href:"/?auto2=true", :class => "btn"} ランダム

%hr
%div= "#{@mediator.counter_human_name}手目 #{@mediator.current_player.location.mark_with_name}番"
%hr

%div= @mediator.player_at(:white).evaluate
%form{action: "/", method: "post", :class => "form-inline"}
  .control-group
    .controls
      %label{:class => "control-label"}= Bushido::Location[:white].mark_with_name
      %input{name: "location", type: "hidden", value: "white"}
      %input{type: "text", name: "way", value: "", autofocus: @mediator.current_player.location.white?}
      %input{type: "submit", value: "打", :class => "btn btn-primary"}

%div
  - if @mediator.player_at(:white).pieces.present?
    .pieces= @mediator.player_at(:white).to_s_pieces
  = MediatorDecorator.new(@mediator).to_html_board
  - if @mediator.player_at(:black).pieces.present?
    .pieces= @mediator.player_at(:black).to_s_pieces

%form{action: "/", method: "post", :class => "form-inline"}
  .control-group
    .controls
      %label{:class => "control-label"}= Bushido::Location[:black].mark_with_name
      %input{name: "location", type: "hidden", value: "black"}
      %input{type: "text", name: "way", value: "", autofocus: @mediator.current_player.location.black?}
      %input{type: "submit", value: "打", :class => "btn btn-primary"}

%div= @mediator.player_at(:black).evaluate

%hr

- if @mediator.human_kif_logs.present?
  %div
    %select
      - @mediator.human_kif_logs.each.with_index do |kif_log, index|
        %option{selected: @mediator.human_kif_logs.last == kif_log}= "#{index.next} #{kif_log}"
  %hr

.div
  %a{href:"/?reset=true", :class => "btn"} リセット

- if ENV['RACK_ENV'] == "development"
  %div= "marshal: #{Marshal.dump(@mediator).bytesize}"
  %div= "session: " + env["rack.session"]["session_id"].to_s.slice(/^.{7}/)
  %div= params.inspect
  %div= ENV['RACK_ENV']
