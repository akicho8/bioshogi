require "./setup"
require 'active_support/core_ext/benchmark'

# Bioshogi.config[:analysis_feature] = false

files = Pathname.glob("../../2chkifu/**/*.{ki2,KI2}").sort
files = Array(files).take((ARGV.first || 100).to_i)
seconds = Benchmark.realtime do
  files.each do |file|
    info = Parser.file_parse(file, typical_error_case: :skip, analysis_technique_feature: true)
    info.to_kif
  end
end

p seconds
tp Analysis::Analyzer.walk_counts.sort_by { |k, v| -v }.to_h
# >> 2.85152000002563
# >> |--------------------------+-------|
# >> |                     駒柱 | 11262 |
# >> |               こびん攻め | 3377  |
# >> |                 位の確保 | 1471  |
# >> |                 飛車不成 | 892   |
# >> |                     入玉 | 891   |
# >> |                   金矢倉 | 858   |
# >> |                   垂れ歩 | 847   |
# >> |                 金底の歩 | 847   |
# >> |                   銀矢倉 | 833   |
# >> |               へこみ矢倉 | 675   |
# >> |                   角不成 | 609   |
# >> |               一直線穴熊 | 573   |
# >> |             ツノ銀型右玉 | 559   |
# >> |               ツノ銀雁木 | 507   |
# >> |                 雁木右玉 | 497   |
# >> |             セメント囲い | 487   |
# >> |                   菱矢倉 | 484   |
# >> |                 四角矢倉 | 460   |
# >> |               金無双急戦 | 455   |
# >> |         阿久津流急戦矢倉 | 454   |
# >> |                 流線矢倉 | 451   |
# >> |                 カギ囲い | 446   |
# >> |             ツノ銀中飛車 | 443   |
# >> |               ツノ銀囲い | 441   |
# >> |                   総矢倉 | 432   |
# >> |             オールド雁木 | 432   |
# >> |         チョコレート囲い | 424   |
# >> |               いちご囲い | 423   |
# >> |               居飛車銀冠 | 419   |
# >> |             ボナンザ囲い | 403   |
# >> |                 升田美濃 | 399   |
# >> |                     銀冠 | 387   |
# >> |             片ツノ銀囲い | 379   |
# >> |             楠本式石田流 | 375   |
# >> |               一文字矢倉 | 368   |
# >> |     角換わり腰掛け銀旧型 | 366   |
# >> |             パンツを脱ぐ | 351   |
# >> |                 四枚銀冠 | 344   |
# >> |                 菊水矢倉 | 343   |
# >> |           ちょんまげ美濃 | 333   |
# >> |                 相掛かり | 332   |
# >> |             居飛車金無双 | 329   |
# >> |           中原流急戦矢倉 | 327   |
# >> |         ノーマル三間飛車 | 320   |
# >> |                 美濃囲い | 320   |
# >> |               アヒル囲い | 316   |
# >> |               アヒル戦法 | 316   |
# >> |                 金門矢倉 | 314   |
# >> |                   左美濃 | 309   |
# >> |               離れ金無双 | 307   |
# >> |         森安流袖飛車穴熊 | 305   |
# >> |                   金無双 | 295   |
# >> |                  ビッグ4 | 272   |
# >> |               カブト囲い | 270   |
# >> |                 四枚穴熊 | 267   |
# >> |                   一間竜 | 266   |
# >> |               居飛車金冠 | 266   |
# >> |           モノレール囲い | 265   |
# >> |               カニカニ銀 | 262   |
# >> |               居飛車穴熊 | 253   |
# >> |                 カニ囲い | 253   |
# >> |                 無敵囲い | 251   |
# >> |                 桂頭の銀 | 249   |
# >> |               たすきの銀 | 249   |
# >> |             割り打ちの銀 | 249   |
# >> |                     尻銀 | 249   |
# >> |                     腹銀 | 249   |
# >> |                 四枚美濃 | 248   |
# >> |               富士見矢倉 | 246   |
# >> |                   舟囲い | 242   |
# >> |               高美濃囲い | 233   |
# >> |                   金美濃 | 232   |
# >> |             ふんどしの桂 | 230   |
# >> |                   継ぎ桂 | 230   |
# >> |                 歩頭の桂 | 230   |
# >> |               たすきの角 | 230   |
# >> |                 左山囲い | 228   |
# >> |           米長流急戦矢倉 | 217   |
# >> |                 大盾囲い | 214   |
# >> |               ゴリゴリ金 | 212   |
# >> |                 ずれ美濃 | 204   |
# >> |               エルモ囲い | 202   |
# >> |             屋敷流二枚銀 | 198   |
# >> |     三間飛車藤井システム | 193   |
# >> |             矢倉新24手組 | 193   |
# >> |         2手目△7四歩戦法 | 193   |
# >> |            初手▲3六歩戦法 | 193   |
# >> |             矢倉旧24手組 | 193   |
# >> |               エルモ急戦 | 192   |
# >> |           桐山流中原囲い | 191   |
# >> |           清野流岐阜戦法 | 190   |
# >> |             裏アヒル戦法 | 190   |
# >> |                   居飛車 | 190   |
# >> |           対矢倉左美濃急戦 | 188   |
# >> |                   超急戦 | 187   |
# >> |                 振り飛車 | 176   |
# >> |                 悪形矢倉 | 176   |
# >> |             裏アヒル囲い | 175   |
# >> |            ▲5五龍中飛車 | 172   |
# >> |             村田システム | 172   |
# >> |             陽動振り飛車 | 171   |
# >> |                 端玉銀冠 | 167   |
# >> |           かんぴょう囲い | 167   |
# >> |           パックマン戦法 | 164   |
# >> |         山崎流パックマン | 164   |
# >> |               角頭歩戦法 | 163   |
# >> |       屋敷流二枚銀棒銀型 | 163   |
# >> |       ショーダンシステム | 162   |
# >> |                 中原囲い | 159   |
# >> |          5筋位取り中飛車 | 157   |
# >> |           塚田スペシャル | 156   |
# >> |                  5手爆弾 | 156   |
# >> |                   早石田 | 155   |
# >> |         角換わり腰掛け銀 | 154   |
# >> |                 銀冠穴熊 | 153   |
# >> |             居飛車金美濃 | 153   |
# >> |       居飛穴音無しの構え | 153   |
# >> |               天守閣囲い | 153   |
# >> |                   高矢倉 | 153   |
# >> |           下町流三間飛車 | 153   |
# >> |           立石流四間飛車 | 153   |
# >> |            △7二飛亜急戦 | 152   |
# >> |                   右矢倉 | 150   |
# >> |                   雀刺し | 149   |
# >> |             あずまや囲い | 148   |
# >> |                 角交換型 | 148   |
# >> |               片美濃囲い | 143   |
# >> |         ノーマル四間飛車 | 143   |
# >> |                 坊主美濃 | 143   |
# >> |               羽生流右玉 | 138   |
# >> |               糸谷流右玉 | 138   |
# >> |       阪田流2手目△9四歩 | 134   |
# >> |                   早囲い | 133   |
# >> |             2手目△6二銀戦法 | 133   |
# >> |        △3三角型空中戦法 | 133   |
# >> |             対振り持久戦 | 133   |
# >> |         4手目△3三角戦法 | 133   |
# >> |           竹部スペシャル | 133   |
# >> |           はく式四間飛車 | 133   |
# >> |                   金多伝 | 123   |
# >> |                 中住まい | 118   |
# >> |                 田楽刺し | 118   |
# >> |                   嬉野流 | 118   |
# >> |                 コーヤン流三間飛車 | 114   |
# >> |             藤井システム | 114   |
# >> |                   金銀橋 | 114   |
# >> |           右四間飛車急戦 | 113   |
# >> |           ミレニアム囲い | 113   |
# >> |         花村流名古屋戦法 | 112   |
# >> |            ▲4六銀右急戦 | 112   |
# >> |            ▲4六銀左急戦 | 112   |
# >> |                 山田定跡 | 112   |
# >> |       メリケン向かい飛車 | 112   |
# >> |             極限早繰り銀 | 112   |
# >> |           カメレオン戦法 | 108   |
# >> |     英春流かまいたち戦法 | 108   |
# >> |                 流れ矢倉 | 108   |
# >> |                 新嬉野流 | 108   |
# >> |                   隅矢倉 | 105   |
# >> |                 木村美濃 | 104   |
# >> |           へなちょこ急戦 | 103   |
# >> |         右四間飛車超急戦 | 103   |
# >> |          ▲4五歩早仕掛け | 103   |
# >> |                 木村定跡 | 103   |
# >> |                   石田流 | 102   |
# >> |        △3三金型早繰り銀 | 101   |
# >> |          振り飛車ビッグ4 | 100   |
# >> |             耀龍四間飛車 | 99    |
# >> |                   鳥刺し | 98    |
# >> |       振り飛車天守閣美濃 | 96    |
# >> |             角換わり右玉 | 96    |
# >> |           神吉流三間飛車 | 96    |
# >> |                     右玉 | 96    |
# >> |             ムリヤリ矢倉 | 95    |
# >> |                 ウソ矢倉 | 95    |
# >> |               串カツ囲い | 95    |
# >> |                   鬼殺し | 94    |
# >> |                 新鬼殺し | 94    |
# >> |              △3三桂戦法 | 94    |
# >> |         鬼殺し向かい飛車 | 94    |
# >> |                   勇気流 | 93    |
# >> |             魔界四間飛車 | 85    |
# >> |                 矢倉穴熊 | 81    |
# >> |         振り飛車銀冠穴熊 | 81    |
# >> |               神吉流穴熊 | 81    |
# >> |           九間飛車左穴熊 | 81    |
# >> |                 連盟美濃 | 80    |
# >> |         振り飛車端玉銀冠 | 79    |
# >> |         飯島流引き角戦法 | 75    |
# >> |                 同型矢倉 | 75    |
# >> |                 腰掛け銀 | 75    |
# >> |                 豆腐矢倉 | 75    |
# >> |                 カタ囲い | 75    |
# >> |                   銀雲雀 | 75    |
# >> |                5筋位取り | 75    |
# >> |     ショーダンオリジナル | 75    |
# >> |               天守閣美濃 | 74    |
# >> |                 空中楼閣 | 74    |
# >> |                 新型雁木 | 73    |
# >> |                 新米長玉 | 71    |
# >> |             升田式石田流 | 71    |
# >> |               高田流左玉 | 71    |
# >> |                 新石田流 | 68    |
# >> |                   角矢倉 | 67    |
# >> |                 金盾囲い | 66    |
# >> |                 箱入り娘 | 66    |
# >> |                 天野矢倉 | 66    |
# >> |                 舟囲いDX | 66    |
# >> |               矢倉早囲い | 65    |
# >> |                 土居矢倉 | 65    |
# >> |                6筋位取り | 65    |
# >> |                 四間飛車 | 62    |
# >> |     角道オープン四間飛車 | 62    |
# >> |         ダイヤモンド美濃 | 62    |
# >> |         角道不突き左美濃 | 62    |
# >> |               脇システム | 60    |
# >> |            天彦流▲6六角 | 59    |
# >> |                   金沢流 | 59    |
# >> |          菜々河流△4四角 | 59    |
# >> |         角換わり早繰り銀 | 57    |
# >> |             矢倉流中飛車 | 57    |
# >> |                   真部流 | 57    |
# >> |           新村田システム | 57    |
# >> |           新丸山ワクチン | 57    |
# >> |           耀龍ひねり飛車 | 57    |
# >> |         振り飛車四枚美濃 | 57    |
# >> |          超速▲3七銀戦法 | 57    |
# >> |               左美濃急戦 | 57    |
# >> |            初手▲7八銀戦法 | 57    |
# >> |                 レグスペ | 56    |
# >> |             室岡システム | 54    |
# >> |                   銀多伝 | 54    |
# >> |                 大隅囲い | 54    |
# >> |                   裾固め | 54    |
# >> |           目くらまし戦法 | 53    |
# >> |              △2三歩戦法 | 53    |
# >> |                 矢倉棒銀 | 51    |
# >> |          矢倉▲3七銀戦法 | 51    |
# >> |           中原流相掛かり | 51    |
# >> |                 大山美濃 | 51    |
# >> |               カブト美濃 | 51    |
# >> |             角換わり棒銀 | 51    |
# >> |             森下システム | 48    |
# >> |             やばボーズ流 | 45    |
# >> |              Uターン飛車 | 44    |
# >> |           きんとうん戦法 | 44    |
# >> |              3→4→3戦法 | 43    |
# >> |          初手▲7八飛戦法 | 43    |
# >> |             羽生式袖飛車 | 43    |
# >> |         2手目△3ニ飛戦法 | 43    |
# >> |                 三間飛車 | 43    |
# >> |                 鷺宮定跡 | 43    |
# >> |             加藤流袖飛車 | 43    |
# >> |                   袖飛車 | 43    |
# >> |         うっかり三間飛車 | 43    |
# >> |           菅井流三間飛車 | 43    |
# >> |           戸辺流4→3戦法 | 43    |
# >> |                 角換わり | 42    |
# >> |                   遠山流 | 42    |
# >> |     飛騨の中飛車合掌造り | 42    |
# >> |                   片銀冠 | 42    |
# >> |             新ポンポン桂 | 40    |
# >> |               カニカニ金 | 40    |
# >> |              ▲5七金戦法 | 40    |
# >> |         ネコ式タテ歩取り | 40    |
# >> |               ひねり飛車 | 40    |
# >> |               ポンポン桂 | 40    |
# >> |               銀立ち矢倉 | 40    |
# >> |               玉頭位取り | 40    |
# >> |           ゴキゲン中飛車 | 38    |
# >> |               原始中飛車 | 38    |
# >> |               先手中飛車 | 38    |
# >> |         英ちゃん流中飛車 | 38    |
# >> |               右四間飛車 | 38    |
# >> |         右四間飛車左美濃 | 38    |
# >> |               矢倉中飛車 | 38    |
# >> |           オリジナル雁木 | 33    |
# >> |             振り飛車穴熊 | 33    |
# >> | 飯島流相掛かり引き角戦法 | 33    |
# >> |           メイドシステム | 33    |
# >> |                   青野流 | 32    |
# >> |               無責任矢倉 | 32    |
# >> |                   鎖鎌銀 | 30    |
# >> |                    UFO銀 | 30    |
# >> |             相掛かり棒銀 | 29    |
# >> |                 原始棒銀 | 29    |
# >> |             幻想四間飛車 | 28    |
# >> |           穴角向かい飛車 | 28    |
# >> |             阪田流向かい飛車 | 28    |
# >> |         天彦流向かい飛車 | 28    |
# >> |   対ひねり飛車たこ金戦法 | 28    |
# >> |               きｍきｍ金 | 28    |
# >> |     ダイレクト向かい飛車 | 28    |
# >> |                   玉頭銀 | 28    |
# >> |               向かい飛車 | 28    |
# >> |       菜々河流向かい飛車 | 28    |
# >> |       振り飛車串カツ囲い | 27    |
# >> |                   逆棒銀 | 26    |
# >> |                   端棒銀 | 26    |
# >> |                     ヒラメ戦法 | 26    |
# >> |                 矢倉右玉 | 25    |
# >> |                   新風車 | 25    |
# >> |                 中原飛車 | 25    |
# >> |                 文鎮囲い | 25    |
# >> |       つくつくぼうし戦法 | 24    |
# >> |           対矢倉急戦棒銀 | 22    |
# >> |                     棒銀 | 22    |
# >> |               松尾流穴熊 | 21    |
# >> |                 横歩取り | 21    |
# >> |               相横歩取り | 21    |
# >> |                   四手角 | 20    |
# >> |                 中座飛車 | 20    |
# >> |                   片穴熊 | 19    |
# >> |            都成流△3一金 | 19    |
# >> |         タランチュラ戦法 | 19    |
# >> |               美濃熊囲い | 19    |
# >> |             丸山ワクチン | 19    |
# >> |                   紙穴熊 | 19    |
# >> |           一手損角換わり | 19    |
# >> |             手損角交換型 | 19    |
# >> |           角交換振り飛車 | 19    |
# >> |           オザワシステム | 19    |
# >> |             中飛車左穴熊 | 18    |
# >> |         英春流カメレオン | 18    |
# >> |                 雲隠れ玉 | 18    |
# >> |                   銀美濃 | 18    |
# >> |             銀冠の小部屋 | 15    |
# >> |           ノーガード戦法 | 15    |
# >> |           振り飛車エルモ | 14    |
# >> |           藤森流急戦矢倉 | 14    |
# >> |             鈴木流早石田 | 13    |
# >> |               xaby角戦法 | 13    |
# >> |             久保流早石田 | 12    |
# >> |                 稲庭戦法 | 12    |
# >> |               間宮久夢流 | 12    |
# >> |                 三段右玉 | 12    |
# >> |                     風車 | 11    |
# >> |               いかだ囲い | 10    |
# >> |                     棒玉 | 10    |
# >> |             一間飛車穴熊 | 10    |
# >> |                   幽霊角 | 10    |
# >> |               トマホーク | 8     |
# >> |                 四段端玉 | 8     |
# >> |              △3三飛戦法 | 8     |
# >> |           ムリヤリ早石田 | 8     |
# >> |               相筋違い角 | 7     |
# >> |               カニ缶囲い | 7     |
# >> |                 筋違い角 | 7     |
# >> |                     棒金 | 7     |
# >> |                 九間飛車 | 5     |
# >> |              △4五角戦法 | 5     |
# >> |         桐山流タテ歩棒銀 | 5     |
# >> |                 遠見の角 | 3     |
# >> |                   GAVA角 | 3     |
# >> |     モノレール向かい飛車 | 2     |
# >> |       振り飛車ミレニアム | 2     |
# >> |                     暴銀 | 2     |
# >> |       四間飛車ミレニアム | 2     |
# >> |         中飛車ミレニアム | 2     |
# >> |                 一間飛車 | 2     |
# >> |       三間飛車ミレニアム | 2     |
# >> |               地下鉄飛車 | 1     |
# >> |--------------------------+-------|
