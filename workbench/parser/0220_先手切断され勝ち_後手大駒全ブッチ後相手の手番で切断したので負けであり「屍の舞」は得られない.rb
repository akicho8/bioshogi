require "../setup"
CSA_BODY = <<~EOT
N+raminitk 初段
N-nakkunnBoy 初段
$START_TIME:2024/08/23 21:34:02
$EVENT:将棋ウォーズ(10分切れ負け)
$TIME_LIMIT:00:10+00
$X_FINAL:切断
$X_WINNER:▲
+
+7776FU,T2
-3334FU,T0
+6766FU,T1
-2233KA,T10
+7978GI,T2
-8222HI,T2
+7867GI,T2
-3142GI,T3
+3948GI,T1
-5162OU,T3
+6756GI,T1
-7172GI,T5
+5645GI,T1
-6271OU,T10
+4534GI,T1
-3344KA,T1
+6978KI,T3
-4152KI,T4
+5756FU,T1
-2324FU,T3
+4857GI,T2
-2425FU,T3
+5746GI,T5
-2526FU,T6
+2726FU,T2
-2226HI,T3
+0027FU,T11
-2624HI,T18
+3445GI,T1
-4433KA,T11
+2726FU,T3
-2474HI,T14
+4958KI,T12
-7476HI,T6
+5867KI,T1
-7674HI,T4
+2625FU,T3
-5354FU,T22
+2524FU,T3
-0022FU,T24
+4534GI,T5
-3344KA,T8
+2423TO,T4
-2223FU,T3
+3423NG,T5
-4253GI,T26
+2332NG,T4
-2133KE,T5
+2821RY,T9
-5364GI,T27
+5969OU,T6
-7182OU,T13
+0076FU,T4
-5455FU,T12
+5655FU,T4
-6455GI,T3
+4655GI,T1
-4455KA,T1
+0041GI,T13
-5262KI,T31
+0056FU,T25
-5564KA,T30
+3233NG,T10
-0085GI,T20
+0068KE,T6
-0031FU,T17
+6665FU,T11
-6453KA,T4
+3343NG,T3
-5335KA,T9
+2131RY,T2
-3568UM,T5
+7868KI,T5
-8576GI,T1
+6776KI,T2
-7476HI,T1
+0067GI,T5
-7674HI,T5
+4152NG,T3
-0051FU,T26
+5251NG,T3
-6151KI,T2
+3151RY,T3
-0061KI,T1
+5121RY,T3
-0076KE,T2
+6776GI,T4
-7476HI,T1
+0077FU,T11
-7656HI,T15
+0057FU,T13
-5655HI,T18
+0074KE,T6
-7374FU,T7
+0046KA,T2
-0054GI,T23
+4344NG,T10
-0073GI,T6
+4655KA,T3
-5455GI,T1
+4454NG,T6
-5566GI,T29
+7776FU,T10
-0084KA,T1
+0085KI,T11
-6657NG,T7
+8584KI,T2
-5768NG,T1
+6968OU,T1
-8384FU,T2
+0046KA,T8
-0056KI,T2
+8811UM,T9
-5646KI,T11
+4746FU,T2
-0056KA,T7
+0067GI,T4
-5629UM,T2
+2129RY,T3
-0056FU,T9
+6756GI,T16
-0053FU,T3
+5455NG,T5
-0043KE,T13
%CHUDAN
' 結末: 切断
' 勝者: black
EOT
info = Parser.parse(CSA_BODY)
tp info.pi.header.to_h
tp info.pi.header["勝者"]
puts info.to_kif
# >> |----------+----------------------------|
# >> |     先手 | raminitk 初段              |
# >> |     後手 | nakkunnBoy 初段            |
# >> | 開始日時 | 2024/08/23 21:34:02        |
# >> |     棋戦 | 将棋ウォーズ(10分切れ負け) |
# >> | 持ち時間 | 00:10+00                   |
# >> |     結末 | 切断                       |
# >> |     勝者 | ▲                         |
# >> |----------+----------------------------|
# >> |----|
# >> | ▲ |
# >> |----|
# >> 先手：raminitk 初段
# >> 後手：nakkunnBoy 初段
# >> 開始日時：2024/08/23 21:34:02
# >> 棋戦：将棋ウォーズ(10分切れ負け)
# >> 持ち時間：10分
# >> 結末：中断
# >> 勝者：▲
# >> 先手の戦法：雁木戦法
# >> 先手の手筋：角頭攻め, ふんどしの桂, 急所の桂, 歩頭の桂, 準王手飛車, 大駒コンプリート
# >> 先手の備考：居飛車, 対抗形, 持久戦, 長手数
# >> 先手の棋風：変態
# >> 先手の駒使用：歩17 銀18 金7 飛1 角4 玉2 桂2 香0 馬0 龍4 と0 圭0 全7 杏0
# >> 先手の玉移動：2回
# >> 先手のキル数：20キル
# >> 後手の戦法：向かい飛車
# >> 後手の囲い：美濃囲い
# >> 後手の手筋：突き捨て, 飛車先交換, 浮き飛車, 土下座の歩, ふんどしの桂, 大駒全ブッチ, 垂れ歩
# >> 後手の備考：振り飛車, 対抗形, 持久戦, 長手数
# >> 後手の棋風：王道
# >> 後手の駒使用：歩14 銀12 金6 飛11 角12 玉3 桂3 香0 馬0 龍0 と0 圭0 全1 杏0
# >> 後手の玉移動：3回
# >> 後手のキル数：18キル
# >> 接触：14手目
# >> 開戦：56手目
# >> 総手数：124手
# >> 総キル数：38キル
# >> 手合割：平手
# >> 手数----指手---------消費時間--
# >>    1 ７六歩(77)   (00:02/00:00:02)
# >>    2 ３四歩(33)   (00:00/00:00:00)
# >>    3 ６六歩(67)   (00:01/00:00:03)
# >>    4 ３三角(22)   (00:10/00:00:10)
# >>    5 ７八銀(79)   (00:02/00:00:05)
# >>    6 ２二飛(82)   (00:02/00:00:12)
# >> *△戦法：向かい飛車
# >> *△備考：振り飛車
# >>    7 ６七銀(78)   (00:02/00:00:07)
# >> *▲戦法：雁木戦法
# >>    8 ４二銀(31)   (00:03/00:00:15)
# >>    9 ４八銀(39)   (00:01/00:00:08)
# >>   10 ６二玉(51)   (00:03/00:00:18)
# >>   11 ５六銀(67)   (00:01/00:00:09)
# >>   12 ７二銀(71)   (00:05/00:00:23)
# >>   13 ４五銀(56)   (00:01/00:00:10)
# >>   14 ７一玉(62)   (00:10/00:00:33)
# >>   15 ３四銀(45)   (00:01/00:00:11)
# >>   16 ４四角(33)   (00:01/00:00:34)
# >>   17 ７八金(69)   (00:03/00:00:14)
# >>   18 ５二金(41)   (00:04/00:00:38)
# >>   19 ５六歩(57)   (00:01/00:00:15)
# >>   20 ２四歩(23)   (00:03/00:00:41)
# >>   21 ５七銀(48)   (00:02/00:00:17)
# >>   22 ２五歩(24)   (00:03/00:00:44)
# >>   23 ４六銀(57)   (00:05/00:00:22)
# >>   24 ２六歩(25)   (00:06/00:00:50)
# >> *△手筋：突き捨て
# >>   25 ２六歩(27)   (00:02/00:00:24)
# >> *▲備考：居飛車
# >>   26 ２六飛(22)   (00:03/00:00:53)
# >> *△手筋：飛車先交換
# >>   27 ２七歩打     (00:11/00:00:35)
# >>   28 ２四飛(26)   (00:18/00:01:11)
# >> *△手筋：浮き飛車
# >>   29 ４五銀(34)   (00:01/00:00:36)
# >>   30 ３三角(44)   (00:11/00:01:22)
# >>   31 ２六歩(27)   (00:03/00:00:39)
# >>   32 ７四飛(24)   (00:14/00:01:36)
# >>   33 ５八金(49)   (00:12/00:00:51)
# >>   34 ７六飛(74)   (00:06/00:01:42)
# >>   35 ６七金(58)   (00:01/00:00:52)
# >>   36 ７四飛(76)   (00:04/00:01:46)
# >> *△手筋：浮き飛車
# >>   37 ２五歩(26)   (00:03/00:00:55)
# >>   38 ５四歩(53)   (00:22/00:02:08)
# >>   39 ２四歩(25)   (00:03/00:00:58)
# >>   40 ２二歩打     (00:24/00:02:32)
# >> *△手筋：土下座の歩
# >>   41 ３四銀(45)   (00:05/00:01:03)
# >>   42 ４四角(33)   (00:08/00:02:40)
# >>   43 ２三歩成(24) (00:04/00:01:07)
# >>   44 ２三歩(22)   (00:03/00:02:43)
# >>   45 ２三銀成(34) (00:05/00:01:12)
# >>   46 ５三銀(42)   (00:26/00:03:09)
# >>   47 ３二成銀(23) (00:04/00:01:16)
# >>   48 ３三桂(21)   (00:05/00:03:14)
# >>   49 ２一飛成(28) (00:09/00:01:25)
# >>   50 ６四銀(53)   (00:27/00:03:41)
# >>   51 ６九玉(59)   (00:06/00:01:31)
# >>   52 ８二玉(71)   (00:13/00:03:54)
# >> *△囲い：美濃囲い
# >>   53 ７六歩打     (00:04/00:01:35)
# >>   54 ５五歩(54)   (00:12/00:04:06)
# >> *△手筋：突き捨て
# >>   55 ５五歩(56)   (00:04/00:01:39)
# >>   56 ５五銀(64)   (00:03/00:04:09)
# >>   57 ５五銀(46)   (00:01/00:01:40)
# >>   58 ５五角(44)   (00:01/00:04:10)
# >>   59 ４一銀打     (00:13/00:01:53)
# >>   60 ６二金(52)   (00:31/00:04:41)
# >>   61 ５六歩打     (00:25/00:02:18)
# >> *▲手筋：角頭攻め
# >>   62 ６四角(55)   (00:30/00:05:11)
# >>   63 ３三成銀(32) (00:10/00:02:28)
# >>   64 ８五銀打     (00:20/00:05:31)
# >>   65 ６八桂打     (00:06/00:02:34)
# >>   66 ３一歩打     (00:17/00:05:48)
# >> *△手筋：土下座の歩
# >>   67 ６五歩(66)   (00:11/00:02:45)
# >> *▲手筋：角頭攻め
# >>   68 ５三角(64)   (00:04/00:05:52)
# >>   69 ４三成銀(33) (00:03/00:02:48)
# >>   70 ３五角(53)   (00:09/00:06:01)
# >>   71 ３一龍(21)   (00:02/00:02:50)
# >>   72 ６八角成(35) (00:05/00:06:06)
# >>   73 ６八金(78)   (00:05/00:02:55)
# >>   74 ７六銀(85)   (00:01/00:06:07)
# >>   75 ７六金(67)   (00:02/00:02:57)
# >>   76 ７六飛(74)   (00:01/00:06:08)
# >>   77 ６七銀打     (00:05/00:03:02)
# >>   78 ７四飛(76)   (00:05/00:06:13)
# >>   79 ５二銀成(41) (00:03/00:03:05)
# >>   80 ５一歩打     (00:26/00:06:39)
# >>   81 ５一成銀(52) (00:03/00:03:08)
# >>   82 ５一金(61)   (00:02/00:06:41)
# >>   83 ５一龍(31)   (00:03/00:03:11)
# >>   84 ６一金打     (00:01/00:06:42)
# >>   85 ２一龍(51)   (00:03/00:03:14)
# >>   86 ７六桂打     (00:02/00:06:44)
# >> *△手筋：ふんどしの桂
# >>   87 ７六銀(67)   (00:04/00:03:18)
# >>   88 ７六飛(74)   (00:01/00:06:45)
# >>   89 ７七歩打     (00:11/00:03:29)
# >>   90 ５六飛(76)   (00:15/00:07:00)
# >>   91 ５七歩打     (00:13/00:03:42)
# >>   92 ５五飛(56)   (00:18/00:07:18)
# >>   93 ７四桂打     (00:06/00:03:48)
# >> *▲手筋：ふんどしの桂, 急所の桂, 歩頭の桂
# >>   94 ７四歩(73)   (00:07/00:07:25)
# >>   95 ４六角打     (00:02/00:03:50)
# >> *▲手筋：準王手飛車
# >>   96 ５四銀打     (00:23/00:07:48)
# >>   97 ４四成銀(43) (00:10/00:04:00)
# >>   98 ７三銀打     (00:06/00:07:54)
# >>   99 ５五角(46)   (00:03/00:04:03)
# >> *▲手筋：大駒コンプリート
# >>  100 ５五銀(54)   (00:01/00:07:55)
# >>  101 ５四成銀(44) (00:06/00:04:09)
# >>  102 ６六銀(55)   (00:29/00:08:24)
# >>  103 ７六歩(77)   (00:10/00:04:19)
# >>  104 ８四角打     (00:01/00:08:25)
# >>  105 ８五金打     (00:11/00:04:30)
# >>  106 ５七銀成(66) (00:07/00:08:32)
# >>  107 ８四金(85)   (00:02/00:04:32)
# >> *▲手筋：大駒コンプリート
# >>  108 ６八成銀(57) (00:01/00:08:33)
# >>  109 ６八玉(69)   (00:01/00:04:33)
# >>  110 ８四歩(83)   (00:02/00:08:35)
# >>  111 ４六角打     (00:08/00:04:41)
# >>  112 ５六金打     (00:02/00:08:37)
# >>  113 １一角成(88) (00:09/00:04:50)
# >>  114 ４六金(56)   (00:11/00:08:48)
# >>  115 ４六歩(47)   (00:02/00:04:52)
# >>  116 ５六角打     (00:07/00:08:55)
# >>  117 ６七銀打     (00:04/00:04:56)
# >>  118 ２九角成(56) (00:02/00:08:57)
# >>  119 ２九龍(21)   (00:03/00:04:59)
# >> *▲手筋：大駒コンプリート
# >>  120 ５六歩打     (00:09/00:09:06)
# >> *△手筋：垂れ歩
# >>  121 ５六銀(67)   (00:16/00:05:15)
# >>  122 ５三歩打     (00:03/00:09:09)
# >>  123 ５五成銀(54) (00:05/00:05:20)
# >>  124 ４三桂打     (00:13/00:09:22)
# >>  125 中断
