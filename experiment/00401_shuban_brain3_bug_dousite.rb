require "./example_helper"

# Board.logger = ActiveSupport::Logger.new(STDOUT)
# Board.promotable_disable
Board.dimensiton_change([2, 4])

mediator = Mediator.new
mediator.placement_from_bod <<~EOT
後手の持駒：
+------+
|v香 ・|
|v歩v玉|
| ・ ・|
| ・ 玉|
+------+
先手の持駒：桂香
手数＝0
EOT
[
  NegaAlphaDiver,
  NegaScoutDiver,
].each do |diver_class|
  brain = mediator.current_player.brain(diver_class: diver_class, legal_moves_all: false, legal_moves_first_only: false) # NegaAlphaDiver
  records = brain.iterative_deepening(depth_max_range: 1..5)
  tp Brain.human_format(records)
end

# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> ["STOP"]
# >> [<△１一玉(12)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> ["STOP"]
# >> [<△１一玉(12)>, <▲１二桂成(24)>]
# >> [<△２三歩成(22)>, <▲２三香成(24)>]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> ["STOP"]
# >> []
# >> [<△２三歩成(22)>, <▲２三香成(24)>, <△２三香成(21)>]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> ["STOP"]
# >> []
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> [<△２三歩成(22)>, "STOP"]
# >> ["STOP"]
# >> []
# >> [<△２三歩成(22)>]
# >> |------+--------------+---------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋              | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+---------------------+---------+------------+----------|
# >> |    1 | ▲２四桂打   |                     |  999999 |          4 | 0.007085 |
# >> |    2 | ▲１三香打   | STOP                |  999999 |          0 | 0.000576 |
# >> |    3 | ▲２三香打   | △２三歩成(22) STOP | -999999 |         36 | 0.033293 |
# >> |    4 | ▲２四玉(14) | △２三歩成(22) STOP | -999999 |         32 | 0.033362 |
# >> |    5 | ▲２四香打   | △２三歩成(22)      | -999999 |          0 | 0.003896 |
# >> |    6 | ▲１三桂打   | △２三歩成(22) STOP | -999999 |         28 | 0.027817 |
# >> |    7 | ▲２三桂打   | △２三歩成(22) STOP | -999999 |          0 | 0.001553 |
# >> |------+--------------+---------------------+---------+------------+----------|
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> []
# >> [<△１一玉(12)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> []
# >> [<△１一玉(12)>, <▲１二桂成(24)>]
# >> [<△１一玉(12)>, <▲２二香成(24)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> []
# >> [<△１一玉(12)>, <▲１二香打>]
# >> [<△２三歩成(22)>, <▲２三香成(24)>, <△２三香成(21)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> []
# >> [<△１一玉(12)>, <▲１二香打>]
# >> [<△２三歩成(22)>, <▲２三香成(24)>, <△２三香成(21)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> [<△２三歩成(22)>]
# >> []
# >> [<△１一玉(12)>, <▲１二香打>]
# >> [<△２三歩成(22)>, <▲２三香成(24)>, <△２三香成(21)>]
# >> |------+--------------+----------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋                                       | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+----------------------------------------------+---------+------------+----------|
# >> |    1 | ▲１三香打   |                                              |  999999 |          0 | 0.000575 |
# >> |    2 | ▲２四桂打   | △１一玉(12) ▲１二香打                      |  999997 |          7 | 0.010625 |
# >> |    3 | ▲２四香打   | △２三歩成(22) ▲２三香成(24) △２三香成(21) | -999996 |         22 | 0.022942 |
# >> |    4 | ▲２四玉(14) | △２三歩成(22)                               | -999998 |         18 | 0.023939 |
# >> |    5 | ▲１三桂打   | △２三歩成(22)                               | -999998 |         40 | 0.026348 |
# >> |    6 | ▲２三桂打   | △２三歩成(22)                               | -999998 |          0 | 0.001793 |
# >> |    7 | ▲２三香打   | △２三歩成(22)                               | -999998 |         28 | 0.019969 |
# >> |------+--------------+----------------------------------------------+---------+------------+----------|
