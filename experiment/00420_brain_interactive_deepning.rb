require "./example_helper"

# Warabi.logger = ActiveSupport::Logger.new(STDOUT)

Board.dimensiton_change([2, 5])
[
  NegaAlphaDiver,
  NegaScoutDiver,
].each do |diver_class|
  mediator = Mediator.new
  mediator.board.placement_from_shape <<~EOT
  +------+
  | ・v香|
  | ・v飛|
  | ・v歩|
  | ・ 飛|
  | ・ 香|
  +------+
    EOT
  brain = mediator.player_at(:black).brain(diver_class: diver_class)
  tp brain.interactive_deepning(depth_max_range: 0..0) # => [{:hand=><▲１三飛成(14)>, :score=>305, :score2=>305, :forecast=>[], :eval_times=>1, :sec=>3.3e-05}, {:hand=><▲２四飛(14)>, :score=>-100, :score2=>-100, :forecast=>[], :eval_times=>1, :sec=>1.3e-05}], [{:hand=><▲１三飛成(14)>, :score=>305, :score2=>305, :forecast=>[], :eval_times=>1, :sec=>1.6e-05}, {:hand=><▲２四飛(14)>, :score=>-100, :score2=>-100, :forecast=>[], :eval_times=>1, :sec=>8.0e-06}]
  tp brain.interactive_deepning(depth_max_range: 0..1) # => [{:hand=><▲２四飛(14)>, :score=>-1200, :score2=>-1200, :forecast=>[<△１四歩成(13)>], :eval_times=>2, :sec=>0.000384}, {:hand=><▲１三飛成(14)>, :score=>-4195, :score2=>-4195, :forecast=>[<△１三飛成(12)>], :eval_times=>2, :sec=>0.000403}], [{:hand=><▲２四飛(14)>, :score=>-1200, :score2=>-1200, :forecast=>[<△１四歩成(13)>], :eval_times=>3, :sec=>0.000224}, {:hand=><▲１三飛成(14)>, :score=>-4195, :score2=>-4195, :forecast=>[<△１三飛成(12)>], :eval_times=>2, :sec=>0.000253}]
  tp brain.interactive_deepning(depth_max_range: 0..2) # => [{:hand=><▲１三飛成(14)>, :score=>705, :score2=>705, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>], :eval_times=>10, :sec=>0.001598}, {:hand=><▲２四飛(14)>, :score=>105, :score2=>105, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>], :eval_times=>12, :sec=>0.0013}], [{:hand=><▲１三飛成(14)>, :score=>705, :score2=>705, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>], :eval_times=>11, :sec=>0.001391}, {:hand=><▲２四飛(14)>, :score=>105, :score2=>105, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>], :eval_times=>15, :sec=>0.001241}]
  tp brain.interactive_deepning(depth_max_range: 0..3) # => [{:hand=><▲２四飛(14)>, :score=>-1325, :score2=>-1325, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>], :eval_times=>30, :sec=>0.005171}, {:hand=><▲１三飛成(14)>, :score=>-1725, :score2=>-1725, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>], :eval_times=>40, :sec=>0.00371}], [{:hand=><▲２四飛(14)>, :score=>-1325, :score2=>-1325, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>], :eval_times=>45, :sec=>0.00726}, {:hand=><▲１三飛成(14)>, :score=>-1725, :score2=>-1725, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>], :eval_times=>38, :sec=>0.00536}]
  tp brain.interactive_deepning(depth_max_range: 0..4) # => [{:hand=><▲２四飛(14)>, :score=>2975, :score2=>2975, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>, <▲１四飛(24)>], :eval_times=>154, :sec=>0.013998}, {:hand=><▲１三飛成(14)>, :score=>-1730, :score2=>-1730, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>, <▲２二歩打>], :eval_times=>135, :sec=>0.015206}], [{:hand=><▲２四飛(14)>, :score=>2975, :score2=>2975, :forecast=>[<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>, <▲１四飛(24)>], :eval_times=>185, :sec=>0.024104}, {:hand=><▲１三飛成(14)>, :score=>-1730, :score2=>-1730, :forecast=>[<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>, <▲２二歩打>], :eval_times=>140, :sec=>0.034283}]
end
# >> |----------------+-------+--------+----------+------------+---------|
# >> | hand           | score | score2 | forecast | eval_times | sec     |
# >> |----------------+-------+--------+----------+------------+---------|
# >> | ▲１三飛成(14) |   305 |    305 | []       |          1 | 3.3e-05 |
# >> | ▲２四飛(14)   |  -100 |   -100 | []       |          1 | 1.3e-05 |
# >> |----------------+-------+--------+----------+------------+---------|
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> | hand           | score | score2 | forecast           | eval_times | sec      |
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> | ▲２四飛(14)   | -1200 |  -1200 | [<△１四歩成(13)>] |          2 | 0.000384 |
# >> | ▲１三飛成(14) | -4195 |  -4195 | [<△１三飛成(12)>] |          2 | 0.000403 |
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> | hand           | score | score2 | forecast                             | eval_times | sec      |
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> | ▲１三飛成(14) |   705 |    705 | [<△１三飛成(12)>, <▲１三香成(15)>] |         10 | 0.001598 |
# >> | ▲２四飛(14)   |   105 |    105 | [<△１四歩成(13)>, <▲１四香(15)>]   |         12 |   0.0013 |
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> |----------------+-------+--------+--------------------------------------------------------+------------+----------|
# >> | hand           | score | score2 | forecast                                               | eval_times | sec      |
# >> |----------------+-------+--------+--------------------------------------------------------+------------+----------|
# >> | ▲２四飛(14)   | -1325 |  -1325 | [<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>]   |         30 | 0.005171 |
# >> | ▲１三飛成(14) | -1725 |  -1725 | [<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>] |         40 |  0.00371 |
# >> |----------------+-------+--------+--------------------------------------------------------+------------+----------|
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
# >> | hand           | score | score2 | forecast                                                             | eval_times | sec      |
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
# >> | ▲２四飛(14)   |  2975 |   2975 | [<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>, <▲１四飛(24)>] |        154 | 0.013998 |
# >> | ▲１三飛成(14) | -1730 |  -1730 | [<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>, <▲２二歩打>] |        135 | 0.015206 |
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
# >> |----------------+-------+--------+----------+------------+---------|
# >> | hand           | score | score2 | forecast | eval_times | sec     |
# >> |----------------+-------+--------+----------+------------+---------|
# >> | ▲１三飛成(14) |   305 |    305 | []       |          1 | 1.6e-05 |
# >> | ▲２四飛(14)   |  -100 |   -100 | []       |          1 | 8.0e-06 |
# >> |----------------+-------+--------+----------+------------+---------|
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> | hand           | score | score2 | forecast           | eval_times | sec      |
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> | ▲２四飛(14)   | -1200 |  -1200 | [<△１四歩成(13)>] |          3 | 0.000224 |
# >> | ▲１三飛成(14) | -4195 |  -4195 | [<△１三飛成(12)>] |          2 | 0.000253 |
# >> |----------------+-------+--------+--------------------+------------+----------|
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> | hand           | score | score2 | forecast                             | eval_times | sec      |
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> | ▲１三飛成(14) |   705 |    705 | [<△１三飛成(12)>, <▲１三香成(15)>] |         11 | 0.001391 |
# >> | ▲２四飛(14)   |   105 |    105 | [<△１四歩成(13)>, <▲１四香(15)>]   |         15 | 0.001241 |
# >> |----------------+-------+--------+--------------------------------------+------------+----------|
# >> |----------------+-------+--------+--------------------------------------------------------+------------+---------|
# >> | hand           | score | score2 | forecast                                               | eval_times | sec     |
# >> |----------------+-------+--------+--------------------------------------------------------+------------+---------|
# >> | ▲２四飛(14)   | -1325 |  -1325 | [<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>]   |         45 | 0.00726 |
# >> | ▲１三飛成(14) | -1725 |  -1725 | [<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>] |         38 | 0.00536 |
# >> |----------------+-------+--------+--------------------------------------------------------+------------+---------|
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
# >> | hand           | score | score2 | forecast                                                             | eval_times | sec      |
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
# >> | ▲２四飛(14)   |  2975 |   2975 | [<△１四歩成(13)>, <▲１四香(15)>, <△１四飛成(12)>, <▲１四飛(24)>] |        185 | 0.024104 |
# >> | ▲１三飛成(14) | -1730 |  -1730 | [<△１三飛成(12)>, <▲１三香成(15)>, <△１三香成(11)>, <▲２二歩打>] |        140 | 0.034283 |
# >> |----------------+-------+--------+----------------------------------------------------------------------+------------+----------|
