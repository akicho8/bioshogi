require "./example_helper"

# Board.logger = ActiveSupport::Logger.new(STDOUT)
# Board.promotable_disable
Board.dimensiton_change([3, 4])

mediator = Mediator.new
mediator.placement_from_bod <<~EOT
後手の持駒：
+---------+
| ・v香 ・|
| ・v歩v玉|
|v飛 ・ ・|
| ・ ・ 玉|
+---------+
先手の持駒：桂香
手数＝0
EOT
[
  NegaAlphaDiver,
  NegaScoutDiver,
].each do |diver_class|
  brain = mediator.current_player.brain(diver_class: diver_class, legal_moves_all: true, legal_moves_first_only: false) # NegaAlphaDiver
  records = brain.iterative_deepening(depth_max_range: 5..5)
  tp Brain.human_format(records)
end

# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋                                                             | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |    1 | ▲２四桂打   |                                                                    |  999999 |         80 | 0.038564 |
# >> |    2 | ▲２四玉(14) | △１三飛成(33) ▲３四玉(24) △２三歩成(22) ▲２四桂打 △２四龍(13) |   -4105 |        539 | 0.196357 |
# >> |    3 | ▲２三桂打   | △２三飛成(33)                                                     | -999999 |          0 | 0.009599 |
# >> |    4 | ▲２三香打   | △２三歩成(22)                                                     | -999999 |          0 | 0.003875 |
# >> |    5 | ▲１三桂打   | △３四飛成(33)                                                     | -999999 |        178 |  0.07365 |
# >> |    6 | ▲１三香打   | △１三飛成(33)                                                     | -999999 |         28 | 0.014315 |
# >> |    7 | ▲３四桂打   | △２三歩成(22)                                                     | -999999 |         10 | 0.014012 |
# >> |    8 | ▲３四香打   | △３四飛成(33)                                                     | -999999 |         81 | 0.033515 |
# >> |    9 | ▲２四香打   | △３四飛成(33)                                                     | -999999 |        219 | 0.075201 |
# >> |   10 | ▲３二香打   | △２三歩成(22)                                                     | -999999 |          0 | 0.004596 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋                                                             | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |    1 | ▲２四桂打   | △１一玉(12) ▲１二香打                                            |  999999 |         57 |   0.0436 |
# >> |    2 | ▲２四玉(14) | △１三飛成(33) ▲３四玉(24) △２三歩成(22) ▲２四桂打 △２四龍(13) |   -4105 |        622 | 0.469685 |
# >> |    3 | ▲２三桂打   | △２三歩成(22) ▲３二香打 △２二香成(21)                           | -999999 |         17 | 0.017038 |
# >> |    4 | ▲２三香打   | △２三飛成(33) ▲３三桂打 △１一玉(12)                             | -999999 |         44 | 0.026707 |
# >> |    5 | ▲１三桂打   | △２三歩成(22) ▲３二香打 △２二玉(12)                             | -999999 |          0 | 0.010786 |
# >> |    6 | ▲１三香打   | △１三飛成(33) ▲３三桂打 △２三歩成(22)                           | -999999 |         34 | 0.014397 |
# >> |    7 | ▲３四桂打   | △２三歩成(22) ▲３二香打 △２二香成(21)                           | -999999 |          0 | 0.011173 |
# >> |    8 | ▲３四香打   | △３四飛成(33) ▲３三桂打 △２三歩成(22)                           | -999999 |         85 | 0.091698 |
# >> |    9 | ▲２四香打   | △３四飛成(33) ▲３三桂打 △２三歩成(22)                           | -999999 |        191 |  0.11102 |
# >> |   10 | ▲３二香打   | △１一玉(12) ▲２四玉(14) △２三歩成(22) ▲１三桂打 △２四と(23)   | -999999 |         43 | 0.032302 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
