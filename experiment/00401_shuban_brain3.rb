require "./example_helper"

# Board.logger = ActiveSupport::Logger.new(STDOUT)
# Board.promotable_disable
Board.dimensiton_change([3, 4])

mediator = Mediator.new
mediator.placement_from_bod <<~EOT
後手の持駒：
+---------+
| ・v香 ・|
| ・v歩v玉|
|v飛 ・ ・|
| ・ ・ 玉|
+---------+
先手の持駒：桂香
手数＝0
EOT
[
  NegaAlphaDiver,
  NegaScoutDiver,
].each do |diver_class|
  brain = mediator.current_player.brain(diver_class: diver_class, legal_moves_all: true, legal_moves_first_only: false) # NegaAlphaDiver
  records = brain.iterative_deepening(depth_max_range: 5..5)
  tp Brain.human_format(records)
end

# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋                                                             | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |    1 | ▲２四桂打   |                                                                    |  999999 |         87 | 0.053674 |
# >> |    2 | ▲２四玉(14) | △１三飛成(33) ▲３四玉(24) △２三歩成(22) ▲２四桂打 △２四龍(13) |   -4105 |        806 |   0.3626 |
# >> |    3 | ▲２三桂打   | △２三飛成(33)                                                     | -999999 |          0 |  0.01266 |
# >> |    4 | ▲２三香打   | △２三歩成(22)                                                     | -999999 |        152 | 0.065855 |
# >> |    5 | ▲１三桂打   | △３四飛成(33)                                                     | -999999 |          2 |  0.00758 |
# >> |    6 | ▲１三香打   | △１三飛成(33)                                                     | -999999 |         28 | 0.014397 |
# >> |    7 | ▲３四桂打   | △２三歩成(22)                                                     | -999999 |         10 | 0.013762 |
# >> |    8 | ▲３四香打   | △３四飛成(33)                                                     | -999999 |        106 | 0.058094 |
# >> |    9 | ▲２四香打   | △３四飛成(33)                                                     | -999999 |        271 | 0.115566 |
# >> |   10 | ▲３二香打   | △２三歩成(22)                                                     | -999999 |          0 | 0.005172 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手       | 読み筋                                                             | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
# >> |    1 | ▲２四桂打   | △１一玉(12) ▲１二香打                                            |  999997 |         58 | 0.066455 |
# >> |    2 | ▲２四玉(14) | △１三飛成(33) ▲３四玉(24) △２三歩成(22) ▲２四桂打 △２四龍(13) |   -4105 |        688 | 0.581278 |
# >> |    3 | ▲２三桂打   | △２三歩成(22) ▲１三香打 △１三と(23)                             | -999996 |         61 | 0.085433 |
# >> |    4 | ▲２三香打   | △２三歩成(22) ▲２四桂打 △２四と(23)                             | -999996 |        253 |  0.14702 |
# >> |    5 | ▲１三香打   | △１三飛成(33) ▲２四桂打 △３一香打                               | -999996 |         66 | 0.030353 |
# >> |    6 | ▲３二香打   | △１一玉(12) ▲２三桂打 △２三歩成(22)                             | -999996 |        150 | 0.159514 |
# >> |    7 | ▲３四香打   | △２三歩成(22) ▲２四桂打 △２二玉(12)                             | -999996 |        196 | 0.200651 |
# >> |    8 | ▲２四香打   | △１三飛成(33) ▲３三桂打 △１四龍(13)                             | -999999 |        125 | 0.079965 |
# >> |    9 | ▲１三桂打   | △２三歩成(22) ▲３二香打 △１四と(23)                             | -999999 |        186 | 0.173932 |
# >> |   10 | ▲３四桂打   | △１三飛成(33) ▲３二香打 △１四龍(13)                             | -999999 |        107 | 0.112971 |
# >> |------+--------------+--------------------------------------------------------------------+---------+------------+----------|
