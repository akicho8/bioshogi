
require "./example_helper"

Board.logger = ActiveSupport::Logger.new(STDOUT)
Board.dimensiton_change([2, 4]) do
  mediator = Mediator.new
  mediator.placement_from_bod <<~EOT
後手の持駒：
+------+
|v香v玉|
|v歩 ・|
| ・ ・|
| 桂 玉|
+------+
先手の持駒：金
手数＝0
EOT
  [
    NegaAlphaDiver,
    # NegaScoutDiver,
  ].each do |diver_class|
    brain = mediator.current_player.brain(diver_class: diver_class, legal_moves_all: false, legal_moves_first_only: false) # NegaAlphaDiver
    records = brain.iterative_deepening(depth_max_range: 1..5)
    tp Brain.human_format(records)
  end
end
# >> #ROOT ▲１二桂成(24)
# >>     0 △ △１二玉(11) (0)
# >>     1 ▲     -175
# >>     0 △ ★確 △１二玉(11)
# >> #ROOT ▲２三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     +160
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二金打
# >> #ROOT ▲２三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     -2360
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     +100
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二桂成(24)
# >>     0 △ △１二玉(11) (0)
# >>     1 ▲     ▲２四玉(14) (2)
# >>     2 △         +175
# >>     1 ▲     ▲１一金打 (3)
# >>     2 △         +235
# >>     1 ▲     ▲２三金打 (4)
# >>     2 △         +235
# >>     1 ▲     ▲１三金打 (5)
# >>     2 △         +235
# >>     1 ▲     ▲２四金打 (6)
# >>     2 △         +235
# >>     1 ▲     ★確 ▲２四玉(14)
# >>     0 △ ★確 △１二玉(11)
# >> #ROOT ▲２三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２二金打 (5)
# >>     2 △         -100
# >>     1 ▲     ▲１二金打 (6)
# >>     2 △         -100
# >>     1 ▲     ▲１四金打 (7)
# >>     2 △         -100
# >>     1 ▲     ★確 ▲２二金打
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二金打
# >> #ROOT ▲２三金打
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２三金(13) (4)
# >>     2 △         -1405
# >>     1 ▲     ★確 ▲２三金(13)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二桂成(24)
# >>     0 △ △１二玉(11) (0)
# >>     1 ▲     ▲２四玉(14) (2)
# >>     2 △         △２三歩成(22) (0)
# >>     3 ▲             -1275
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             -175
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             -140
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１一金打 (3)
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             -2695
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２三金打 (4)
# >>     2 △         △２三歩成(22) (0)
# >>     3 ▲             -3795
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１三金打 (5)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             -235
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             -200
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２四金打 (6)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             -235
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ★確 ▲１三金打
# >>     0 △ ★確 △１二玉(11)
# >> #ROOT ▲２三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２二金打 (5)
# >>     2 △         △２二香成(21) (0)
# >>     3 ▲             -2960
# >>     2 △         △２二と(23) (6)
# >>     3 ▲             -2360
# >>     2 △         ★確 △２二香成(21)
# >>     1 ▲     ▲１二金打 (6)
# >>     1 ▲     ★確 ▲１二金打
# >> #ROOT ▲１二金打
# >> #ROOT ▲２三金打
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２三金(13) (4)
# >>     2 △         △２二香成(21) (0)
# >>     3 ▲             +805
# >>     2 △         △２三香成(21) (1)
# >>     3 ▲             -1655
# >>     2 △         ★確 △２三香成(21)
# >>     1 ▲     ★確 ▲２三金(13)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二桂成(24)
# >>     0 △ △１二玉(11) (0)
# >>     1 ▲     ▲２四玉(14) (2)
# >>     2 △         △２三歩成(22) (0)
# >>     3 ▲             ▲１一金打 (3)
# >>     4 △                 +1335
# >>     3 ▲             ▲２二金打 (4)
# >>     4 △                 +1335
# >>     3 ▲             ▲１三金打 (5)
# >>     4 △                 +1335
# >>     3 ▲             ▲１四金打 (6)
# >>     4 △                 +1335
# >>     3 ▲             ★確 ▲１一金打
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             ▲１三玉(24) (1)
# >>     4 △                 +175
# >>     3 ▲             ★確 ▲１三玉(24)
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             ▲１四玉(24) (2)
# >>     4 △                 +140
# >>     3 ▲             ★確 ▲１四玉(24)
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１一金打 (3)
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             ▲１三玉(14) (1)
# >>     4 △                 +2695
# >>     3 ▲             ▲２四玉(14) (2)
# >>     4 △                 +2695
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２三金打 (4)
# >>     2 △         △２三歩成(22) (0)
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１三金打 (5)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             ▲２四玉(14) (1)
# >>     4 △                 +235
# >>     3 ▲             ▲２二金(13) (2)
# >>     4 △                 +30
# >>     3 ▲             ▲１二金(13) (3)
# >>     4 △                 +235
# >>     3 ▲             ▲２三金(13) (4)
# >>     4 △                 +235
# >>     3 ▲             ★確 ▲２二金(13)
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             ▲２四玉(14) (1)
# >>     4 △                 +200
# >>     3 ▲             ▲２二金(13) (2)
# >>     4 △                 -5
# >>     3 ▲             ★確 ▲２二金(13)
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２四金打 (6)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             ▲１三玉(14) (1)
# >>     4 △                 +235
# >>     3 ▲             ▲２三金(24) (2)
# >>     4 △                 +235
# >>     3 ▲             ▲１三金(24) (3)
# >>     4 △                 +235
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ★確 ▲１三金打
# >>     0 △ ★確 △１二玉(11)
# >> #ROOT ▲２三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２二金打 (5)
# >>     2 △         △２二香成(21) (0)
# >>     2 △         ★確 △２二香成(21)
# >>     1 ▲     ▲１二金打 (6)
# >>     1 ▲     ★確 ▲１二金打
# >> #ROOT ▲１二金打
# >> #ROOT ▲２三金打
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２三金(13) (4)
# >>     2 △         △２二香成(21) (0)
# >>     3 ▲             ▲１二桂成(24) (0)
# >>     4 △                 -1305
# >>     3 ▲             ▲２二金(23) (2)
# >>     4 △                 -2635
# >>     3 ▲             ▲１二金(23) (3)
# >>     4 △                 -805
# >>     3 ▲             ▲１三金(23) (4)
# >>     4 △                 -805
# >>     3 ▲             ▲１二歩打 (5)
# >>     4 △                 -800
# >>     3 ▲             ▲１三歩打 (6)
# >>     4 △                 -800
# >>     3 ▲             ★確 ▲２二金(23)
# >>     2 △         △２三香成(21) (1)
# >>     3 ▲             ▲２三玉(14) (1)
# >>     4 △                 -175
# >>     3 ▲             ▲２二歩打 (3)
# >>     4 △                 +1660
# >>     3 ▲             ▲１二歩打 (4)
# >>     4 △                 +1660
# >>     3 ▲             ▲１三歩打 (5)
# >>     4 △                 +1660
# >>     3 ▲             ★確 ▲２三玉(14)
# >>     2 △         ★確 △２三香成(21)
# >>     1 ▲     ★確 ▲２三金(13)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１二桂成(24)
# >>     0 △ △１二玉(11) (0)
# >>     1 ▲     ▲２四玉(14) (2)
# >>     2 △         △２三歩成(22) (0)
# >>     3 ▲             ▲１一金打 (3)
# >>     4 △                 △２二玉(12) (2)
# >>     5 ▲                     -1335
# >>     4 △                 △１一玉(12) (3)
# >>     5 ▲                     -3795
# >>     4 △                 △２二桂打 (8)
# >>     5 ▲                     -1300
# >>     4 △                 ★確 △１一玉(12)
# >>     3 ▲             ▲２二金打 (4)
# >>     4 △                 △２二香成(21) (0)
# >>     5 ▲                     -4395
# >>     4 △                 ★確 △２二香成(21)
# >>     3 ▲             ▲１三金打 (5)
# >>     4 △                 △１一玉(12) (2)
# >>     5 ▲                     -1335
# >>     4 △                 △１三と(23) (5)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △１三と(23)
# >>     3 ▲             ▲１四金打 (6)
# >>     4 △                 △２二香成(21) (0)
# >>     5 ▲                     -1935
# >>     4 △                 △２二玉(12) (2)
# >>     5 ▲                     -1335
# >>     4 △                 △１一玉(12) (3)
# >>     5 ▲                     -1335
# >>     4 △                 △１四と(23) (4)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △１四と(23)
# >>     3 ▲             ★確 ▲１一金打
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             ▲１三玉(24) (1)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -1275
# >>     4 △                 △１二桂打 (2)
# >>     5 ▲                     -140
# >>     3 ▲             ★確 ▲１三玉(24)
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             ▲１四玉(24) (2)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -1240
# >>     4 △                 △２三桂成(11) (3)
# >>     5 ▲                     -640
# >>     3 ▲             ★確 ▲１四玉(24)
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１一金打 (3)
# >>     2 △         △１一玉(12) (3)
# >>     3 ▲             ▲１三玉(14) (1)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △２三歩成(22)
# >>     3 ▲             ▲２四玉(14) (2)
# >>     4 △                 △１二玉(11) (0)
# >>     5 ▲                     -2695
# >>     4 △                 △２三歩成(22) (1)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △２三歩成(22)
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２三金打 (4)
# >>     2 △         △２三歩成(22) (0)
# >>     2 △         ★確 △２三歩成(22)
# >>     1 ▲     ▲１三金打 (5)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             ▲２四玉(14) (1)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -1335
# >>     4 △                 △１二桂打 (2)
# >>     5 ▲                     -200
# >>     4 △                 ★確 △２三歩成(22)
# >>     3 ▲             ▲２二金(13) (2)
# >>     4 △                 △２二香成(21) (0)
# >>     5 ▲                     -3090
# >>     4 △                 ★確 △２二香成(21)
# >>     3 ▲             ▲１二金(13) (3)
# >>     4 △                 △１二玉(11) (0)
# >>     5 ▲                     -2695
# >>     4 △                 ★確 △１二玉(11)
# >>     3 ▲             ▲２三金(13) (4)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △２三歩成(22)
# >>     3 ▲             ★確 ▲２四玉(14)
# >>     2 △         △１一桂打 (4)
# >>     3 ▲             ▲２四玉(14) (1)
# >>     3 ▲             ★確 ▲２四玉(14)
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ▲２四金打 (6)
# >>     2 △         △１一玉(12) (2)
# >>     3 ▲             ▲１三玉(14) (1)
# >>     4 △                 △２三歩成(22) (0)
# >>     5 ▲                     -1335
# >>     4 △                 ★確 △２三歩成(22)
# >>     3 ▲             ▲２三金(24) (2)
# >>     4 △                 △２三歩成(22) (1)
# >>     5 ▲                     -3795
# >>     4 △                 ★確 △２三歩成(22)
# >>     3 ▲             ▲１三金(24) (3)
# >>     4 △                 △２三歩成(22) (1)
# >>     5 ▲                     -1335
# >>     4 △                 ★確 △２三歩成(22)
# >>     2 △         ★確 △１一玉(12)
# >>     1 ▲     ★確 ▲１三金打
# >>     0 △ ★確 △１二玉(11)
# >> #ROOT ▲２三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三玉(14)
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２二金打 (5)
# >>     2 △         △２二香成(21) (0)
# >>     2 △         ★確 △２二香成(21)
# >>     1 ▲     ▲１二金打 (6)
# >>     1 ▲     ★確 ▲１二金打
# >> #ROOT ▲１二金打
# >> #ROOT ▲２三金打
# >>     0 △ △２三歩成(22) (1)
# >>     0 △ ★確 △２三歩成(22)
# >> #ROOT ▲１三金打
# >>     0 △ △２三歩成(22) (1)
# >>     1 ▲     ▲２三金(13) (4)
# >>     2 △         △２二香成(21) (0)
# >>     3 ▲             ▲１二桂成(24) (0)
# >>     4 △                 △１二杏(22) (4)
# >>     5 ▲                     -630
# >>     4 △                 ★確 △１二杏(22)
# >>     3 ▲             ▲２二金(23) (2)
# >>     4 △                 △２二玉(11) (1)
# >>     5 ▲                     +175
# >>     4 △                 ★確 △２二玉(11)
# >>     3 ▲             ▲１二金(23) (3)
# >>     4 △                 △１二杏(22) (4)
# >>     5 ▲                     -1655
# >>     4 △                 ★確 △１二杏(22)
# >>     3 ▲             ▲１三金(23) (4)
# >>     4 △                 △２一玉(11) (1)
# >>     5 ▲                     +805
# >>     4 △                 △１三杏(22) (2)
# >>     5 ▲                     -1655
# >>     4 △                 ★確 △１三杏(22)
# >>     3 ▲             ▲１二歩打 (5)
# >>     4 △                 △２一玉(11) (1)
# >>     5 ▲                     +800
# >>     4 △                 △１二杏(22) (4)
# >>     5 ▲                     +595
# >>     4 △                 ★確 △１二杏(22)
# >>     3 ▲             ▲１三歩打 (6)
# >>     4 △                 △２一玉(11) (1)
# >>     5 ▲                     +800
# >>     4 △                 △１三杏(22) (2)
# >>     5 ▲                     +595
# >>     4 △                 ★確 △１三杏(22)
# >>     3 ▲             ★確 ▲１二歩打
# >>     2 △         △２三香成(21) (1)
# >>     3 ▲             ▲２三玉(14) (1)
# >>     4 △                 △２一玉(11) (2)
# >>     5 ▲                     +175
# >>     4 △                 △２一金打 (3)
# >>     5 ▲                     +235
# >>     4 △                 △２二金打 (4)
# >>     5 ▲                     +235
# >>     4 △                 △１二金打 (5)
# >>     5 ▲                     +235
# >>     4 △                 △１三金打 (6)
# >>     5 ▲                     +235
# >>     4 △                 △１四金打 (7)
# >>     5 ▲                     +235
# >>     4 △                 ★確 △２一玉(11)
# >>     3 ▲             ▲２二歩打 (3)
# >>     4 △                 △２二玉(11) (1)
# >>     5 ▲                     -1865
# >>     4 △                 ★確 △２二玉(11)
# >>     3 ▲             ▲１二歩打 (4)
# >>     4 △                 △２二玉(11) (5)
# >>     5 ▲                     -1660
# >>     4 △                 ★確 △２二玉(11)
# >>     3 ▲             ▲１三歩打 (5)
# >>     4 △                 △１四杏(23) (0)
# >>     4 △                 ★確 △１四杏(23)
# >>     3 ▲             ★確 ▲２三玉(14)
# >>     2 △         ★確 △２三香成(21)
# >>     1 ▲     ★確 ▲２三金(13)
# >>     0 △ ★確 △２三歩成(22)
# >> |------+----------------+----------------------------------------------------------------------+---------+------------+----------|
# >> | 順位 | 候補手         | 読み筋                                                               | ▲形勢  | 評価局面数 | 処理時間 |
# >> |------+----------------+----------------------------------------------------------------------+---------+------------+----------|
# >> |    1 | ▲１三玉(14)   |                                                                      |  999999 |          0 | 0.002783 |
# >> |    2 | ▲１二金打     |                                                                      |  999999 |          0 | 0.000341 |
# >> |    3 | ▲１三金打     | △２三歩成(22) ▲２三金(13) △２三香成(21) ▲２三玉(14) △２一玉(11) |     175 |         17 | 0.010696 |
# >> |    4 | ▲１二桂成(24) | △１二玉(11) ▲１三金打 △１一玉(12) ▲２四玉(14) △２三歩成(22)     |   -1335 |         25 | 0.016794 |
# >> |    5 | ▲２三玉(14)   | △２三歩成(22)                                                       | -999999 |          0 | 0.000308 |
# >> |    6 | ▲２三金打     | △２三歩成(22)                                                       | -999999 |          0 | 0.000862 |
# >> |------+----------------+----------------------------------------------------------------------+---------+------------+----------|
