# 盤面の読み取り
require "./example_helper"

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fa1545e61e8 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[{:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441210420 "１一">}], #<Bushido::Location:0x007fa1545e6120 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[]}
+---+
| 歩|
+---+
EOT

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fa1545e61e8 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[], #<Bushido::Location:0x007fa1545e6120 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[{:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165441192700 "２一">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165441182240 "１一">}]}
+------+
|v桂v香|
| ・ ・|
+------+
EOT

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fa1545e61e8 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[{:piece=><Bushido::Piece:70165440854500 角 bishop>, :promoted=>true, :point=>#<Bushido::Point:70165441162640 "５一">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :promoted=>true, :point=>#<Bushido::Point:70165441144480 "４二">}, {:piece=><Bushido::Piece:70165440854840 銀 silver>, :promoted=>true, :point=>#<Bushido::Point:70165441131560 "６三">}, {:piece=><Bushido::Piece:70165440854840 銀 silver>, :point=>#<Bushido::Point:70165441097780 "４五">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441077540 "７六">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441064460 "８七">}, {:piece=><Bushido::Piece:70165440854840 銀 silver>, :point=>#<Bushido::Point:70165441061440 "７七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441045760 "９八">}, {:piece=><Bushido::Piece:70165440855020 玉 king>, :point=>#<Bushido::Point:70165441035120 "７八">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165441033780 "６八">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165441032160 "１八">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165441029780 "９九">}, {:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165441028140 "８九">}, {:piece=><Bushido::Piece:70165440854400 飛 rook>, :point=>#<Bushido::Point:70165441018200 "３九">}], #<Bushido::Location:0x007fa1545e6120 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[{:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165441164680 "８一">}, {:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165441159780 "２一">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165441149560 "１一">}, {:piece=><Bushido::Piece:70165440854400 飛 rook>, :point=>#<Bushido::Point:70165441147120 "９二">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441127660 "５三">}, {:piece=><Bushido::Piece:70165440855020 玉 king>, :point=>#<Bushido::Point:70165441117620 "３三">}, {:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165441115340 "３四">}, {:piece=><Bushido::Piece:70165440854920 金 gold>, :point=>#<Bushido::Point:70165441113640 "１四">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441100540 "８五">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441096200 "３五">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441094260 "２五">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441083720 "１五">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441079680 "９六">}, {:piece=><Bushido::Piece:70165440854500 角 bishop>, :point=>#<Bushido::Point:70165441067320 "６六">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165441051680 "６七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :promoted=>true, :point=>#<Bushido::Point:70165441049540 "５七">}]}
+---------------------------+
| ・v桂 ・ ・ 馬 ・ ・v桂v香|
|v飛 ・ ・ ・ ・ と ・ ・ ・|
| ・ ・ ・ 全v歩 ・v玉 ・ ・|
| ・ ・ ・ ・ ・ ・v桂 ・v金|
| ・v歩 ・ ・ ・ 銀v歩v歩v歩|
|v歩 ・ 歩v角 ・ ・ ・ ・ ・|
| ・ 歩 銀v歩vと ・ ・ ・ ・|
| 歩 ・ 玉 香 ・ ・ ・ ・ 香|
| 香 桂 ・ ・ ・ ・ 飛 ・ ・|
+---------------------------+
EOT

TeaiInfo["平手"].both_board_info[L.b] # => [{:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440981560 "９七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440970300 "８七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440966520 "７七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440964260 "６七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440954120 "５七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440952120 "４七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440950040 "３七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440948040 "２七">}, {:piece=><Bushido::Piece:70165440854300 歩 pawn>, :point=>#<Bushido::Point:70165440947160 "１七">}, {:piece=><Bushido::Piece:70165440854500 角 bishop>, :point=>#<Bushido::Point:70165440935740 "８八">}, {:piece=><Bushido::Piece:70165440854400 飛 rook>, :point=>#<Bushido::Point:70165440933760 "２八">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165440931100 "９九">}, {:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165440921340 "８九">}, {:piece=><Bushido::Piece:70165440854840 銀 silver>, :point=>#<Bushido::Point:70165440919600 "７九">}, {:piece=><Bushido::Piece:70165440854920 金 gold>, :point=>#<Bushido::Point:70165440917820 "６九">}, {:piece=><Bushido::Piece:70165440855020 玉 king>, :point=>#<Bushido::Point:70165440916280 "５九">}, {:piece=><Bushido::Piece:70165440854920 金 gold>, :point=>#<Bushido::Point:70165440914780 "４九">}, {:piece=><Bushido::Piece:70165440854840 銀 silver>, :point=>#<Bushido::Point:70165440904820 "３九">}, {:piece=><Bushido::Piece:70165440854760 桂 knight>, :point=>#<Bushido::Point:70165440903080 "２九">}, {:piece=><Bushido::Piece:70165440854640 香 lance>, :point=>#<Bushido::Point:70165440900440 "１九">}]
