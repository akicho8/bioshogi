# 盤面の読み取り
require "./example_helper"

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fb142894720 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[{:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199648300280 "１一">}], #<Bushido::Location:0x007fb142894630 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[]}
+---+
| 歩|
+---+
EOT

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fb142894720 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[], #<Bushido::Location:0x007fb142894630 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[{:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199642933340 "２一">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199642920080 "１一">}]}
+------+
|v桂v香|
| ・ ・|
+------+
EOT

Parser.board_parse(<<~EOT) # => {#<Bushido::Location:0x007fb142894720 @attributes={:key=>:black, :name=>"先手", :mark=>"▲", :reverse_mark=>"▼", :other_marks=>["b", "^"], :varrow=>" ", :angle=>0, :csa_sign=>"+", :code=>0}>=>[{:piece=><Bushido::Piece:70199651068240 角 bishop>, :promoted=>true, :point=>#<Bushido::Point:70199647957920 "５一">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :promoted=>true, :point=>#<Bushido::Point:70199647855400 "４二">}, {:piece=><Bushido::Piece:70199651068480 銀 silver>, :promoted=>true, :point=>#<Bushido::Point:70199647794780 "６三">}, {:piece=><Bushido::Piece:70199651068480 銀 silver>, :point=>#<Bushido::Point:70199642766500 "４五">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647593440 "７六">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647461420 "８七">}, {:piece=><Bushido::Piece:70199651068480 銀 silver>, :point=>#<Bushido::Point:70199647401620 "７七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647022420 "９八">}, {:piece=><Bushido::Piece:70199651068660 玉 king>, :point=>#<Bushido::Point:70199646789720 "７八">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199646710640 "６八">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199649123100 "１八">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199649120220 "９九">}, {:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199649118600 "８九">}, {:piece=><Bushido::Piece:70199651068160 飛 rook>, :point=>#<Bushido::Point:70199649116940 "３九">}], #<Bushido::Location:0x007fb142894630 @attributes={:key=>:white, :name=>"後手", :mark=>"▽", :reverse_mark=>"△", :other_marks=>["w"], :varrow=>"v", :angle=>180, :csa_sign=>"-", :code=>1}>=>[{:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199647987360 "８一">}, {:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199647923440 "２一">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199647910220 "１一">}, {:piece=><Bushido::Piece:70199651068160 飛 rook>, :point=>#<Bushido::Point:70199647890200 "９二">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647779200 "５三">}, {:piece=><Bushido::Piece:70199651068660 玉 king>, :point=>#<Bushido::Point:70199647760220 "３三">}, {:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199647264380 "３四">}, {:piece=><Bushido::Piece:70199651068560 金 gold>, :point=>#<Bushido::Point:70199647259540 "１四">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647240420 "８五">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199642748440 "３五">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199642700260 "２五">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647678160 "１五">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647662940 "９六">}, {:piece=><Bushido::Piece:70199651068240 角 bishop>, :point=>#<Bushido::Point:70199647482000 "６六">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199647354800 "６七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :promoted=>true, :point=>#<Bushido::Point:70199647172380 "５七">}]}
+---------------------------+
| ・v桂 ・ ・ 馬 ・ ・v桂v香|
|v飛 ・ ・ ・ ・ と ・ ・ ・|
| ・ ・ ・ 全v歩 ・v玉 ・ ・|
| ・ ・ ・ ・ ・ ・v桂 ・v金|
| ・v歩 ・ ・ ・ 銀v歩v歩v歩|
|v歩 ・ 歩v角 ・ ・ ・ ・ ・|
| ・ 歩 銀v歩vと ・ ・ ・ ・|
| 歩 ・ 玉 香 ・ ・ ・ ・ 香|
| 香 桂 ・ ・ ・ ・ 飛 ・ ・|
+---------------------------+
EOT


TeaiInfo["平手"].both_board_info[L.b] # => [{:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651180900 "９七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651170420 "８七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651168640 "７七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651166240 "６七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651154760 "５七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199651150460 "４七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199644036640 "３七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199644034360 "２七">}, {:piece=><Bushido::Piece:70199651068080 歩 pawn>, :point=>#<Bushido::Point:70199644032380 "１七">}, {:piece=><Bushido::Piece:70199651068240 角 bishop>, :point=>#<Bushido::Point:70199644029580 "８八">}, {:piece=><Bushido::Piece:70199651068160 飛 rook>, :point=>#<Bushido::Point:70199651138360 "２八">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199651134980 "９九">}, {:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199651132360 "８九">}, {:piece=><Bushido::Piece:70199651068480 銀 silver>, :point=>#<Bushido::Point:70199651122260 "７九">}, {:piece=><Bushido::Piece:70199651068560 金 gold>, :point=>#<Bushido::Point:70199651120160 "６九">}, {:piece=><Bushido::Piece:70199651068660 玉 king>, :point=>#<Bushido::Point:70199651116060 "５九">}, {:piece=><Bushido::Piece:70199651068560 金 gold>, :point=>#<Bushido::Point:70199655169320 "４九">}, {:piece=><Bushido::Piece:70199651068480 銀 silver>, :point=>#<Bushido::Point:70199655167840 "３九">}, {:piece=><Bushido::Piece:70199651068400 桂 knight>, :point=>#<Bushido::Point:70199655166280 "２九">}, {:piece=><Bushido::Piece:70199651068320 香 lance>, :point=>#<Bushido::Point:70199655164580 "１九">}]
