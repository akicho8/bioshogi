require "./example_helper"

info = Parser.parse(<<~EOT)
▲７六歩    △８四歩    ▲７八銀    △３四歩    ▲７七銀    △８五歩    ▲２六歩    △４二銀    ▲７八金    △３二金
▲４八銀    △６二銀    ▲５六歩    △５四歩    ▲６九玉    △４一玉    ▲２五歩    △３三銀    ▲５七銀    △５三銀
▲３六歩    △５二金    ▲５八金    △７四歩    ▲４六歩    △４四歩    ▲３七桂    △６四銀    ▲６六歩    △４三金右
▲４七金    △３一角    ▲６八銀右  △７五歩    ▲６七銀    △７六歩    ▲同銀右    △７五歩    ▲６七銀    △７三銀
▲５八飛    △７四銀    ▲５五歩    △同　歩    ▲同　飛    △４二角    ▲５八飛    △３一玉    ▲７九角    △５四歩
▲６八角    △２二玉    ▲７九玉    △９四歩    ▲１六歩    △１四歩    ▲５六銀    △７六歩    ▲同　銀    △７五銀
▲同　銀    △同　角    ▲７七金    △８四角    ▲７六銀    △６四歩    ▲７八玉    △７二飛    ▲７五歩    △９三角
▲９六歩    △８四銀    ▲６七銀左  △７五銀    ▲７六歩    △８四銀    ▲４五歩    △８六歩    ▲同　歩    △８五歩
▲２四歩    △同　歩    ▲２五歩    △８六歩    ▲２四歩    △８五銀    ▲２八飛    △２六歩    ▲同　飛    △７一角
▲２八飛    △２六歩    ▲８四歩    △８二飛    ▲１五歩    △同　歩    ▲２五桂    △８四飛    ▲１二歩    △同　香
▲１三歩    △同　桂    ▲３三桂成  △同　玉    ▲９七桂    △７五桂    ▲８五桂    △８七歩成  ▲同　金    △同桂成
▲同　玉    △８六歩    ▲同　角    △８五飛    ▲７四銀    △８四飛    ▲８五銀打  △８二飛    ▲８三歩    △９二飛
▲１四歩    △２五桂    ▲２六飛    △２四玉    ▲６八角    △１四玉    ▲２四桂    △３三金上  ▲１二桂成  △２四歩
▲１三成桂  △同　玉    ▲２五飛    △１四金    ▲２八飛    △２三玉    ▲８二歩成  △同　飛    ▲８四香    △１二飛
▲８一香成  △５三角    ▲６三銀成  △５五桂    ▲同　銀    △同　歩    ▲２六桂    △２五金    ▲３七桂    △２六金
▲同　飛    △８六歩    ▲同　玉    △８四歩    ▲同　銀    △８五歩    ▲同　玉    △９三桂    ▲同銀成    △同　香
▲２五歩
EOT

mediator = Mediator.new
mediator.board_reset
info.move_infos.each do |e|
  mediator.execute(e[:input])
  p [mediator.turn_info.counter, e[:input], mediator.hand_logs.last.to_kif_ki2_csa]
end
# >> [1, "▲７六歩", ["７六歩(77)", "７六歩", "+7776FU"]]
# >> [2, "△８四歩", ["８四歩(83)", "８四歩", "-8384FU"]]
# >> [3, "▲７八銀", ["７八銀(79)", "７八銀", "+7978GI"]]
# >> [4, "△３四歩", ["３四歩(33)", "３四歩", "-3334FU"]]
# >> [5, "▲７七銀", ["７七銀(78)", "７七銀", "+7877GI"]]
# >> [6, "△８五歩", ["８五歩(84)", "８五歩", "-8485FU"]]
# >> [7, "▲２六歩", ["２六歩(27)", "２六歩", "+2726FU"]]
# >> [8, "△４二銀", ["４二銀(31)", "４二銀", "-3142GI"]]
# >> [9, "▲７八金", ["７八金(69)", "７八金", "+6978KI"]]
# >> [10, "△３二金", ["３二金(41)", "３二金", "-4132KI"]]
# >> [11, "▲４八銀", ["４八銀(39)", "４八銀", "+3948GI"]]
# >> [12, "△６二銀", ["６二銀(71)", "６二銀", "-7162GI"]]
# >> [13, "▲５六歩", ["５六歩(57)", "５六歩", "+5756FU"]]
# >> [14, "△５四歩", ["５四歩(53)", "５四歩", "-5354FU"]]
# >> [15, "▲６九玉", ["６九玉(59)", "６九玉", "+5969OU"]]
# >> [16, "△４一玉", ["４一玉(51)", "４一玉", "-5141OU"]]
# >> [17, "▲２五歩", ["２五歩(26)", "２五歩", "+2625FU"]]
# >> [18, "△３三銀", ["３三銀(42)", "３三銀", "-4233GI"]]
# >> [19, "▲５七銀", ["５七銀(48)", "５七銀", "+4857GI"]]
# >> [20, "△５三銀", ["５三銀(62)", "５三銀", "-6253GI"]]
# >> [21, "▲３六歩", ["３六歩(37)", "３六歩", "+3736FU"]]
# >> [22, "△５二金", ["５二金(61)", "５二金", "-6152KI"]]
# >> [23, "▲５八金", ["５八金(49)", "５八金", "+4958KI"]]
# >> [24, "△７四歩", ["７四歩(73)", "７四歩", "-7374FU"]]
# >> [25, "▲４六歩", ["４六歩(47)", "４六歩", "+4746FU"]]
# >> [26, "△４四歩", ["４四歩(43)", "４四歩", "-4344FU"]]
# >> [27, "▲３七桂", ["３七桂(29)", "３七桂", "+2937KE"]]
# >> [28, "△６四銀", ["６四銀(53)", "６四銀", "-5364GI"]]
# >> [29, "▲６六歩", ["６六歩(67)", "６六歩", "+6766FU"]]
# >> [30, "△４三金右", ["４三金(52)", "４三金右", "-5243KI"]]
# >> [31, "▲４七金", ["４七金(58)", "４七金", "+5847KI"]]
# >> [32, "△３一角", ["３一角(22)", "３一角", "-2231KA"]]
# >> [33, "▲６八銀右", ["６八銀(57)", "６八銀右", "+5768GI"]]
# >> [34, "△７五歩", ["７五歩(74)", "７五歩", "-7475FU"]]
# >> [35, "▲６七銀", ["６七銀(68)", "６七銀", "+6867GI"]]
# >> [36, "△７六歩", ["７六歩(75)", "７六歩", "-7576FU"]]
# >> [37, "▲同銀右", ["７六銀(67)", "同銀右", "+6776GI"]]
# >> [38, "△７五歩", ["７五歩打", "７五歩", "-0075FU"]]
# >> [39, "▲６七銀", ["６七銀(76)", "６七銀", "+7667GI"]]
# >> [40, "△７三銀", ["７三銀(64)", "７三銀", "-6473GI"]]
# >> [41, "▲５八飛", ["５八飛(28)", "５八飛", "+2858HI"]]
# >> [42, "△７四銀", ["７四銀(73)", "７四銀", "-7374GI"]]
# >> [43, "▲５五歩", ["５五歩(56)", "５五歩", "+5655FU"]]
# >> [44, "△同歩", ["５五歩(54)", "同歩", "-5455FU"]]
# >> [45, "▲同飛", ["５五飛(58)", "同飛", "+5855HI"]]
# >> [46, "△４二角", ["４二角(31)", "４二角", "-3142KA"]]
# >> [47, "▲５八飛", ["５八飛(55)", "５八飛", "+5558HI"]]
# >> [48, "△３一玉", ["３一玉(41)", "３一玉", "-4131OU"]]
# >> [49, "▲７九角", ["７九角(88)", "７九角", "+8879KA"]]
# >> [50, "△５四歩", ["５四歩打", "５四歩", "-0054FU"]]
# >> [51, "▲６八角", ["６八角(79)", "６八角", "+7968KA"]]
# >> [52, "△２二玉", ["２二玉(31)", "２二玉", "-3122OU"]]
# >> [53, "▲７九玉", ["７九玉(69)", "７九玉", "+6979OU"]]
# >> [54, "△９四歩", ["９四歩(93)", "９四歩", "-9394FU"]]
# >> [55, "▲１六歩", ["１六歩(17)", "１六歩", "+1716FU"]]
# >> [56, "△１四歩", ["１四歩(13)", "１四歩", "-1314FU"]]
# >> [57, "▲５六銀", ["５六銀(67)", "５六銀", "+6756GI"]]
# >> [58, "△７六歩", ["７六歩(75)", "７六歩", "-7576FU"]]
# >> [59, "▲同銀", ["７六銀(77)", "同銀", "+7776GI"]]
# >> [60, "△７五銀", ["７五銀(74)", "７五銀", "-7475GI"]]
# >> [61, "▲同銀", ["７五銀(76)", "同銀", "+7675GI"]]
# >> [62, "△同角", ["７五角(42)", "同角", "-4275KA"]]
# >> [63, "▲７七金", ["７七金(78)", "７七金", "+7877KI"]]
# >> [64, "△８四角", ["８四角(75)", "８四角", "-7584KA"]]
# >> [65, "▲７六銀", ["７六銀打", "７六銀", "+0076GI"]]
# >> [66, "△６四歩", ["６四歩(63)", "６四歩", "-6364FU"]]
# >> [67, "▲７八玉", ["７八玉(79)", "７八玉", "+7978OU"]]
# >> [68, "△７二飛", ["７二飛(82)", "７二飛", "-8272HI"]]
# >> [69, "▲７五歩", ["７五歩打", "７五歩", "+0075FU"]]
# >> [70, "△９三角", ["９三角(84)", "９三角", "-8493KA"]]
# >> [71, "▲９六歩", ["９六歩(97)", "９六歩", "+9796FU"]]
# >> [72, "△８四銀", ["８四銀打", "８四銀", "-0084GI"]]
# >> [73, "▲６七銀左", ["６七銀(76)", "６七銀左", "+7667GI"]]
# >> [74, "△７五銀", ["７五銀(84)", "７五銀", "-8475GI"]]
# >> [75, "▲７六歩", ["７六歩打", "７六歩", "+0076FU"]]
# >> [76, "△８四銀", ["８四銀(75)", "８四銀", "-7584GI"]]
# >> [77, "▲４五歩", ["４五歩(46)", "４五歩", "+4645FU"]]
# >> [78, "△８六歩", ["８六歩(85)", "８六歩", "-8586FU"]]
# >> [79, "▲同歩", ["８六歩(87)", "同歩", "+8786FU"]]
# >> [80, "△８五歩", ["８五歩打", "８五歩", "-0085FU"]]
# >> [81, "▲２四歩", ["２四歩(25)", "２四歩", "+2524FU"]]
# >> [82, "△同歩", ["２四歩(23)", "同歩", "-2324FU"]]
# >> [83, "▲２五歩", ["２五歩打", "２五歩", "+0025FU"]]
# >> [84, "△８六歩", ["８六歩(85)", "８六歩", "-8586FU"]]
# >> [85, "▲２四歩", ["２四歩(25)", "２四歩", "+2524FU"]]
# >> [86, "△８五銀", ["８五銀(84)", "８五銀", "-8485GI"]]
# >> [87, "▲２八飛", ["２八飛(58)", "２八飛", "+5828HI"]]
# >> [88, "△２六歩", ["２六歩打", "２六歩", "-0026FU"]]
# >> [89, "▲同飛", ["２六飛(28)", "同飛", "+2826HI"]]
# >> [90, "△７一角", ["７一角(93)", "７一角", "-9371KA"]]
# >> [91, "▲２八飛", ["２八飛(26)", "２八飛", "+2628HI"]]
# >> [92, "△２六歩", ["２六歩打", "２六歩", "-0026FU"]]
# >> [93, "▲８四歩", ["８四歩打", "８四歩", "+0084FU"]]
# >> [94, "△８二飛", ["８二飛(72)", "８二飛", "-7282HI"]]
# >> [95, "▲１五歩", ["１五歩(16)", "１五歩", "+1615FU"]]
# >> [96, "△同歩", ["１五歩(14)", "同歩", "-1415FU"]]
# >> [97, "▲２五桂", ["２五桂(37)", "２五桂", "+3725KE"]]
# >> [98, "△８四飛", ["８四飛(82)", "８四飛", "-8284HI"]]
# >> [99, "▲１二歩", ["１二歩打", "１二歩", "+0012FU"]]
# >> [100, "△同香", ["１二香(11)", "同香", "-1112KY"]]
# >> [101, "▲１三歩", ["１三歩打", "１三歩", "+0013FU"]]
# >> [102, "△同桂", ["１三桂(21)", "同桂", "-2113KE"]]
# >> [103, "▲３三桂成", ["３三桂成(25)", "３三桂成", "+2533NK"]]
# >> [104, "△同玉", ["３三玉(22)", "同玉", "-2233OU"]]
# >> [105, "▲９七桂", ["９七桂(89)", "９七桂", "+8997KE"]]
# >> [106, "△７五桂", ["７五桂打", "７五桂", "-0075KE"]]
# >> [107, "▲８五桂", ["８五桂(97)", "８五桂", "+9785KE"]]
# >> [108, "△８七歩成", ["８七歩成(86)", "８七歩成", "-8687TO"]]
# >> [109, "▲同金", ["８七金(77)", "同金", "+7787KI"]]
# >> [110, "△同桂成", ["８七桂成(75)", "同桂成", "-7587NK"]]
# >> [111, "▲同玉", ["８七玉(78)", "同玉", "+7887OU"]]
# >> [112, "△８六歩", ["８六歩打", "８六歩", "-0086FU"]]
# >> [113, "▲同角", ["８六角(68)", "同角", "+6886KA"]]
# >> [114, "△８五飛", ["８五飛(84)", "８五飛", "-8485HI"]]
# >> [115, "▲７四銀", ["７四銀打", "７四銀", "+0074GI"]]
# >> [116, "△８四飛", ["８四飛(85)", "８四飛", "-8584HI"]]
# >> [117, "▲８五銀打", ["８五銀打", "８五銀打", "+0085GI"]]
# >> [118, "△８二飛", ["８二飛(84)", "８二飛", "-8482HI"]]
# >> [119, "▲８三歩", ["８三歩打", "８三歩", "+0083FU"]]
# >> [120, "△９二飛", ["９二飛(82)", "９二飛", "-8292HI"]]
# >> [121, "▲１四歩", ["１四歩打", "１四歩", "+0014FU"]]
# >> [122, "△２五桂", ["２五桂(13)", "２五桂", "-1325KE"]]
# >> [123, "▲２六飛", ["２六飛(28)", "２六飛", "+2826HI"]]
# >> [124, "△２四玉", ["２四玉(33)", "２四玉", "-3324OU"]]
# >> [125, "▲６八角", ["６八角(86)", "６八角", "+8668KA"]]
# >> [126, "△１四玉", ["１四玉(24)", "１四玉", "-2414OU"]]
# >> [127, "▲２四桂", ["２四桂打", "２四桂", "+0024KE"]]
# >> [128, "△３三金上", ["３三金(32)", "３三金上", "-3233KI"]]
# >> [129, "▲１二桂成", ["１二桂成(24)", "１二桂成", "+2412NK"]]
# >> [130, "△２四歩", ["２四歩打", "２四歩", "-0024FU"]]
# >> [131, "▲１三成桂", ["１三圭(12)", "１三圭", "+1213NK"]]
# >> [132, "△同玉", ["１三玉(14)", "同玉", "-1413OU"]]
# >> [133, "▲２五飛", ["２五飛(26)", "２五飛", "+2625HI"]]
# >> [134, "△１四金", ["１四金打", "１四金", "-0014KI"]]
# >> [135, "▲２八飛", ["２八飛(25)", "２八飛", "+2528HI"]]
# >> [136, "△２三玉", ["２三玉(13)", "２三玉", "-1323OU"]]
# >> [137, "▲８二歩成", ["８二歩成(83)", "８二歩成", "+8382TO"]]
# >> [138, "△同飛", ["８二飛(92)", "同飛", "-9282HI"]]
# >> [139, "▲８四香", ["８四香打", "８四香", "+0084KY"]]
# >> [140, "△１二飛", ["１二飛(82)", "１二飛", "-8212HI"]]
# >> [141, "▲８一香成", ["８一香成(84)", "８一香成", "+8481NY"]]
# >> [142, "△５三角", ["５三角(71)", "５三角", "-7153KA"]]
# >> [143, "▲６三銀成", ["６三銀成(74)", "６三銀成", "+7463NG"]]
# >> [144, "△５五桂", ["５五桂打", "５五桂", "-0055KE"]]
# >> [145, "▲同銀", ["５五銀(56)", "同銀", "+5655GI"]]
# >> [146, "△同歩", ["５五歩(54)", "同歩", "-5455FU"]]
# >> [147, "▲２六桂", ["２六桂打", "２六桂", "+0026KE"]]
# >> [148, "△２五金", ["２五金(14)", "２五金", "-1425KI"]]
# >> [149, "▲３七桂", ["３七桂打", "３七桂", "+0037KE"]]
# >> [150, "△２六金", ["２六金(25)", "２六金", "-2526KI"]]
# >> [151, "▲同飛", ["２六飛(28)", "同飛", "+2826HI"]]
# >> [152, "△８六歩", ["８六歩打", "８六歩", "-0086FU"]]
# >> [153, "▲同玉", ["８六玉(87)", "同玉", "+8786OU"]]
# >> [154, "△８四歩", ["８四歩打", "８四歩", "-0084FU"]]
# >> [155, "▲同銀", ["８四銀(85)", "同銀", "+8584GI"]]
# >> [156, "△８五歩", ["８五歩打", "８五歩", "-0085FU"]]
# >> [157, "▲同玉", ["８五玉(86)", "同玉", "+8685OU"]]
# >> [158, "△９三桂", ["９三桂打", "９三桂", "-0093KE"]]
# >> [159, "▲同銀成", ["９三銀成(84)", "同銀成", "+8493NG"]]
# >> [160, "△同香", ["９三香(91)", "同香", "-9193KY"]]
# >> [161, "▲２五歩", ["２五歩打", "２五歩", "+0025FU"]]
