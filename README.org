#+OPTIONS: toc:nil num:nil author:nil creator:nil
#+OPTIONS: H:3 \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t

* 将棋の定石を覚えたくて作ってるぷろぐらむ

: @field = Field.new
: @players = []
: @players << Player.new("先手", @field, :kotti)
: @players << Player.new("後手", @field, :atti)
: @players.each(&:setup)
: @players[0].execute("7六歩")
: puts @field

#+ATTR_HTML: border="1" rules="all" frame="all"
| 9    | 8    | 7    | 6    | 5    | 4    | 3    | 2    | 1    |
|------+------+------+------+------+------+------+------+------|
| 香↓ | 桂↓ | 銀↓ | 金↓ | 王↓ | 金↓ | 銀↓ | 桂↓ | 香↓ |
| .    | 飛↓ | .    | .    | .    | .    | .    | 角↓ | .    |
| 歩↓ | 歩↓ | 歩↓ | 歩↓ | 歩↓ | 歩↓ | 歩↓ | 歩↓ | 歩↓ |
| .    | .    | .    | .    | .    | .    | .    | .    | .    |
| .    | .    | .    | .    | .    | .    | .    | .    | .    |
| .    | .    | 歩   | .    | .    | .    | .    | .    | .    |
| 歩   | 歩   | .    | 歩   | 歩   | 歩   | 歩   | 歩   | 歩   |
| .    | 角   | .    | .    | .    | .    | .    | 飛   | .    |
| 香   | 桂   | 銀   | 金   | 王   | 金   | 銀   | 桂   | 香   |

** 自分用メモ

*** 座標系

**** 表示座標系

     #+ATTR_HTML: border="1" rules="all" frame="all"
    | 9   | 8 |   7 | 6 | 5 | 4 |   3 | 2 | 1   |    |
    |-----+---+-----+---+---+---+-----+---+-----+----|
    | 9一 |   |     |   |   |   |     |   | 1一 | 一 |
    |     |   |     |   |   |   |     |   |     | 二 |
    |     |   |     |   |   |   | 3三 |   | 1三 | 三 |
    |     |   |     |   |   |   |     |   |     | 四 |
    |     |   |     |   |   |   |     |   |     | 五 |
    |     |   |     |   |   |   |     |   |     | 六 |
    |     |   | 7七 |   |   |   |     |   |     | 七 |
    |     |   |     |   |   |   |     |   |     | 八 |
    | 9九 |   |     |   |   |   |     |   | 1九 | 九 |

**** コード座標系

     #+ATTR_HTML: border="1" rules="all" frame="all"
    |   | 0   | 1 |   2 | 3 | 4 | 5 |   6 | 7 | 8   |
    |---+-----+---+-----+---+---+---+-----+---+-----|
    | 0 | 0,0 |   |     |   |   |   |     |   | 8,0 |
    | 1 |     |   |     |   |   |   |     |   |     |
    | 2 |     |   |     |   |   |   | 6,2 |   | 8,2 |
    | 3 |     |   |     |   |   |   |     |   |     |
    | 4 |     |   |     |   |   |   |     |   |     |
    | 5 |     |   |     |   |   |   |     |   |     |
    | 6 |     |   | 2,6 |   |   |   |     |   |     |
    | 7 |     |   |     |   |   |   |     |   |     |
    | 8 | 0,8 |   |     |   |   |   |     |   | 8,8 |

*** 棋譜のパース

- "7六歩" の場合 "7六" と "歩" に分離する。
- "2二角成" の場合 "2二" と "角" と "成" に分離する。
- 同銀の場合、同がどこを差しているのか、前の座標を見る。
- "5八金右" の場合、5八から見て右下にある金が斜め上に上がったという意味なのでこの解釈が難しい。
- "4八" に金があった場合、"5八金右" は真横の金なのか、斜め下の金なのか、どっちだろう。
